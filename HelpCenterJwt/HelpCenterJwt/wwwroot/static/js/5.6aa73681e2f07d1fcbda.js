webpackJsonp([5],{KSFt:function(e,t){},Lbz8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={mounted:function(){this.loadData()},data:function(){return{treeData:[],defaultProps:{children:"child",label:"docTypeName"}}},props:{},methods:{loadData:function(){var e=this;this.$axios.get("api/DocTypeConfig/toplist").then(function(t){e.treeData=t.data.data}).catch(function(e){console.log(e)})},loadChild:function(e,t){if(e.parent)if(e.data.child&&0!==e.data.child.length)t(e.data.child);else{var a=this,o={docTypeId:e.data.docTypeId};a.$axios.get("api/DocTypeConfig",{params:o}).then(function(e){0==e.result?a.$message.error(e.tips):t(e.data.data.childNodes)}).catch(function(e){console.log(e)})}},handleNodeClick:function(e,t,a){this.crUsrId=e.crUsrId,this.$emit("nodeClick",e,t,a)}}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-tree",{ref:"tree",attrs:{data:this.treeData,props:this.defaultProps,lazy:"",load:this.loadChild},on:{"node-click":this.handleNodeClick}})],1)},staticRenderFns:[]};var r=a("C7Lr")(o,i,!1,function(e){a("KSFt")},"data-v-7cf5b786",null).exports,n={props:{modifyVisible:"",docSetInput:""},components:{},data:function(){return{tableData:[],currentPage:1,pageTotal:0,pageSize:10,judgePage:0,parameterKey:"",parameterJudge:0,idx:-1}},computed:{},mounted:function(){this.dsAllLoadData()},methods:{dsAllLoadData:function(e,t,a){var o=this,i=void 0;o.judgePage=void 0==t?0:t,o.currentPage=void 0==a?o.currentPage:a,0==o.judgePage?(i={url:"/api/DocTypeConfig/pagelist",params:{pageIndex:o.currentPage,rowCount:o.pageSize}},o.parameterKey="",o.parameterJudge=0):1==o.judgePage?(i={url:"api/DocTypeConfig/keyword/doctypename",params:{rowCount:o.pageSize,pageIndex:o.currentPage,strDocTypeName:e}},o.parameterKey=e,o.parameterJudge=1):2==o.judgePage&&(i={url:"api/DocTypeConfig/doctypelist/doctypeid",params:{rowCount:o.pageSize,pageIndex:o.currentPage,docTypeId:e}},o.parameterKey=e,o.parameterJudge=2),o.$axios.get(i.url,{params:i.params}).then(function(e){e.data.result?(o.tableData=e.data.data.info,o.pageTotal=e.data.data.totalCount):o.$message.error(e.data.tips)})},DocSetloadData:function(e){},searchData:function(e){},handleCurrentChange:function(e){this.currentPage=e,this.dsAllLoadData(this.parameterKey,this.parameterJudge)},handleModify:function(e){this.$emit("modifyVisibleChange",e)},deleteHandle:function(e){this.$emit("onDelete",e)}},watch:{},beforeDestroy:function(){}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"crdt",label:"创建时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"docTypeNum",label:"排序号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"docPreTypeName",label:"上级分类名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"docTypeName",label:"分类名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"docTypeDeptName",label:"归属部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"280",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleModify(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{staticClass:"red",attrs:{type:"text"},on:{click:function(a){e.deleteHandle(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.pageTotal},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(n,s,!1,function(e){a("qK2K")},"data-v-3f6ddf2e",null).exports,l=a("oweW"),d=a("Q+Tu"),p={props:{formProps:{type:Object,default:function(){return{method:void 0}}}},mounted:function(){this.loadData(),this.getTreeSelectData(),this.getDocTreeSelectData()},components:{xyDepartTreeSelect:l.a,xyCategoryTreeSelect:d.a},data:function(){return{preSelectData:"",DocSelectData:"",selectValue:null,selectDeptValue:null,loading:!0,options:[],optionsDept:[],normalizer:function(e){return{id:e.docTypeId,label:e.docTypeName,children:e.child}},normalizerDept:function(e){return{id:e.deptId,label:e.deptName,children:e.child}},value:"",form:{docTypeNum:void 0,docPreTypeId:void 0,docTypeName:void 0,docTypeDeptId:void 0}}},methods:{getTreeSelectData:function(e){this.preSelectData=e,console.log(e)},getDocTreeSelectData:function(e){this.DocSelectData=e,console.log(e)},loadData:function(e){var t=this,a=e||this.formProps.docTypeId;this.$axios.get("/api/DocTypeConfig",{params:{docTypeId:a}}).then(function(e){e.data.result&&(t.form=e.data.data.detail)})},onSubmit:function(){var e=this;"put"===this.formProps.methods&&(this.form.docPreTypeId=this.DocSelectData,this.form.docTypeDeptId=this.preSelectData,console.log(this.formProps),console.log(this.form),this.$axios.put("/api/DocTypeConfig?docTypeId="+this.formProps.docTypeId,this.form).then(function(t){!1===t.data.result?e.$message.error(t.data.tips):(e.$message({message:t.data.tips,type:"success"}),e.$emit("docFormSubmitSuccess"))})),"post"===this.formProps.methods&&(this.form.docPreTypeId=this.DocSelectData,this.form.docTypeDeptId=this.preSelectData,this.$axios.post("/api/DocTypeConfig",this.form).then(function(t){!1===t.data.result?e.$message.error(t.data.tips):(e.$message({message:t.data.tips,type:"success"}),e.$emit("docFormSubmitSuccess"))}))},docClose:function(){this.$emit("docClose")},resetForm:function(){this.$refs.form.resetFields()}},watch:{}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"depart-form"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"排序号",prop:"docTypeNum"}},[a("el-input",{model:{value:e.form.docTypeNum,callback:function(t){e.$set(e.form,"docTypeNum",t)},expression:"form.docTypeNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级分类",prop:"docPreTypeId"}},[a("xy-category-tree-select",{on:{cateDTSelect:e.getDocTreeSelectData}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类名称",prop:"docTypeName"}},[a("el-input",{attrs:{placeholder:"安卓设备管理"},model:{value:e.form.docTypeName,callback:function(t){e.$set(e.form,"docTypeName",t)},expression:"form.docTypeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"归属部门",prop:"docTypeDeptId"}},[a("xy-depart-tree-select",{on:{transferDTSelect:e.getTreeSelectData}})],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:e.docClose}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var m={name:"sortSetting",data:function(){return{modifyVisible:!1,delVisible:!1,docSetInput:"",formProps:{method:"put"},tip:""}},components:{xyDocTree:r,xyDocTable:c,xyDocForm:a("C7Lr")(p,u,!1,function(e){a("VXw9")},"data-v-1db0fe68",null).exports},computed:{data:function(){}},methods:{DocSetloadData:function(){this.$refs.unitTable.dsAllLoadData("",0,1),this.docSetInput=""},docSetSearch:function(){this.$refs.unitTable.dsAllLoadData(this.docSetInput,1,1)},nodeClickHandle:function(e,t,a){this.$refs.unitTable.dsAllLoadData(e.docTypeId,2,1)},addHandle:function(){this.tip="新增分类",this.formProps.methods="post",this.modifyVisible=!0,this.$refs.docForm&&this.$refs.docForm.resetForm()},modifyVisibleFun:function(e){this.tip="修改分类",this.formProps=e,this.formProps.methods="put",this.$refs.docForm&&this.$refs.docForm.loadData(e.docTypeId),this.modifyVisible=!0},docClose:function(){this.modifyVisible=!1},docFormSubmitSuccess:function(){this.$refs.unitTable.dsAllLoadData("",0,1),this.modifyVisible=!1},delDocSetting:function(e){var t=this,a=this;this.$confirm("您真的删除【"+e.docTypeName+"】吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.delete("/api/DocTypeConfig/",{params:{docTypeId:e.docTypeId}}).then(function(e){!1===e.data.result?t.$message.error(e.data.tips):(t.$message({message:e.data.tips,type:"success"}),t.$refs.unitTable.DocSetloadData())})}).catch(function(){})}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-setting"}),e._v("文档管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("分类设置")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-container",{staticStyle:{"max-height":"636px"}},[a("el-main",[a("el-scrollbar",{staticClass:"custom-scrollbar",staticStyle:{"min-height":"587px"}},[a("xy-doc-tree",{ref:"unitTree",attrs:{checkStrictly:!0},on:{nodeClick:e.nodeClickHandle}})],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-box-add",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.addHandle}},[e._v("\n                        添加\n                    ")]),e._v(" "),a("div",{staticClass:"handle-search-box"},[a("span",[e._v("分类名称:")]),e._v(" "),a("el-input",{staticClass:"search",attrs:{size:"small",clearable:"",placeholder:"请输入关键字进行搜索"},on:{clear:e.DocSetloadData},model:{value:e.docSetInput,callback:function(t){e.docSetInput=t},expression:"docSetInput"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.docSetSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.DocSetloadData}},[e._v("重置")])],1)],1),e._v(" "),a("xy-doc-table",{ref:"unitTable",attrs:{docSetInput:e.docSetInput,modifyVisible:e.modifyVisible},on:{onDelete:e.delDocSetting,modifyVisibleChange:e.modifyVisibleFun}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.tip,visible:e.modifyVisible,width:"30%"},on:{"update:visible":function(t){e.modifyVisible=t}}},[a("xy-doc-form",{ref:"docForm",attrs:{formProps:e.formProps},on:{docFormSubmitSuccess:e.docFormSubmitSuccess,docClose:e.docClose}})],1)],1)},staticRenderFns:[]};var h=a("C7Lr")(m,f,!1,function(e){a("ZOqP")},"data-v-1303daae",null);t.default=h.exports},VXw9:function(e,t){},ZOqP:function(e,t){},qK2K:function(e,t){}});