webpackJsonp([8],{"99dn":function(e,t){},RiIv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={mounted:function(){this.loadData()},data:function(){return{treeData:[],defaultProps:{children:"child",label:"docTypeName",isLeaf:"isLeaf"}}},props:{},methods:{loadData:function(){var e=this;this.$axios.get("api/DocTypeConfig/toplist").then(function(t){e.treeData=t.data.data}).catch(function(e){console.log(e)})},loadChild:function(e,t){if(e.parent)if(e.data.child&&0!==e.data.child.length)t(e.data.child);else{var a=this,o={docTypeId:e.data.docTypeId};a.$axios.get("api/DocTypeConfig",{params:o}).then(function(e){0==e.result?a.$message.error(e.tips):t(e.data.data.childNodes)}).catch(function(e){console.log(e)})}},handleNodeClick:function(e,t,a){this.crUsrId=e.crUsrId,this.$emit("nodeClick",e,t,a)}}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-tree",{ref:"tree",attrs:{data:this.treeData,props:this.defaultProps,lazy:"",load:this.loadChild},on:{"node-click":this.handleNodeClick}})],1)},staticRenderFns:[]};var n={mounted:function(){this.dlAllLoadData()},props:{modifyVisible:"",docListKey:"",strDocTypeId:""},components:{},data:function(){return{tableData:[],emptyText:"暂无数据",currentPage:1,pageTotal:0,pageSize:10,judgePage:0,parameterKey:"",parameterJudge:0}},computed:{rowClass:function(){return{height:"20px"}}},methods:{dlAllLoadData:function(e,t,a){var o=this,i=void 0;o.judgePage=void 0==t?0:t,o.currentPage=void 0==a?o.currentPage:a,0==o.judgePage?(i={url:"/api/HelpDoc/pagelist",params:{pageIndex:o.currentPage,rowCount:o.pageSize}},o.parameterKey="",o.parameterJudge=0):1==o.judgePage?(i={url:"api/HelpDoc/pagelist",params:{rowCount:o.pageSize,pageIndex:o.currentPage,keyword:e}},o.parameterKey=e,o.parameterJudge=1):2==o.judgePage&&(i={url:"api/HelpDoc/doctypeid",params:{rowCount:o.pageSize,pageIndex:o.currentPage,docTypeId:e}},o.parameterKey=e,o.parameterJudge=2),o.$axios.get(i.url,{params:i.params}).then(function(e){e.data.result?(o.tableData=e.data.data.info,o.pageTotal=e.data.data.totalCount):o.$message.error(e.data.tips)})},loadData:function(e){},searchData:function(){},searchDataTree:function(e){},handleCurrentChange:function(e){this.currentPage=e,this.dlAllLoadData(this.parameterKey,this.parameterJudge)},DltView:function(e){this.$router.push({name:"DocListOperateView",params:{id:e.docId}})},DltModify:function(e){this.$router.push({name:"DocListOperateModify",params:{id:e.docId}})},handleDelete:function(e){this.$emit("delDocList",e)}},watch:{},beforeDestroy:function(){}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"doc-list-table"},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","empty-text":e.emptyText,"row-style":e.rowClass}},[a("el-table-column",{attrs:{prop:"docTypeName",label:"文档分类",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"docDeptName",label:"文档所属部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"docTitle",label:"文档标题",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"docFullText",label:"文档纯文字内容",align:"center","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"docNum",label:"文档排序号码",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"docCount",label:"点击数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"280",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.DltView(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.editRole,expression:"scope.row.editRole"}],attrs:{type:"text"},on:{click:function(a){e.DltModify(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.editRole,expression:"scope.row.editRole"}],staticClass:"red",attrs:{type:"text"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.pageTotal},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]};var r={name:"sortSetting",data:function(){return{modifyVisible:!1,delVisible:!1,docListKey:""}},mounted:function(){var e=this;this.$bus.$on("DocListOperateAdd",function(){e.$refs.unitTable.loadData()})},components:{xyDocListTree:a("C7Lr")(o,i,!1,function(e){a("99dn")},"data-v-e231b6b0",null).exports,xyDocListTable:a("C7Lr")(n,l,!1,function(e){a("Syte")},"data-v-590b31c2",null).exports},computed:{data:function(){}},methods:{DocListloadData:function(){this.$refs.unitTable.dlAllLoadData("",0,1),this.docListKey=""},docListSearch:function(){this.$refs.unitTable.dlAllLoadData(this.docListKey,1,1)},nodeClickHandle:function(e,t,a){this.$refs.unitTable.dlAllLoadData(e.docTypeId,2,1)},addHandle:function(){this.$router.push({path:"/docListOperateAdd"})},modifyVisibleFun:function(e){console.log("父元素"),console.log(e),this.modifyVisible=e},delDocList:function(e){var t=this,a=this;this.$confirm("确定要删除此文档吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.delete("/api/HelpDoc",{params:{helpDocId:e.docId}}).then(function(e){!1===e.data.result?t.$message.error(e.data.tips):(t.$refs.unitTable.dlAllLoadData("",0,1),t.$message({message:e.data.tips,type:"success"}))})}).catch(function(){})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-setting"}),e._v("文档管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("文档列表")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-container",{staticStyle:{"max-height":"636px"}},[a("el-main",[a("el-scrollbar",{staticClass:"custom-scrollbar",staticStyle:{"min-height":"587px"}},[a("xy-doc-list-tree",{ref:"unitTree",attrs:{checkStrictly:!0},on:{nodeClick:e.nodeClickHandle}})],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:19}},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-box-add",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.addHandle}},[e._v("\n                        添加\n                    ")]),e._v(" "),a("div",{staticClass:"handle-search-box"},[a("span",[e._v("文档名称:")]),e._v(" "),a("el-input",{staticClass:"search",attrs:{size:"small",clearable:"",placeholder:"请输入关键字进行搜索"},on:{clear:e.DocListloadData},model:{value:e.docListKey,callback:function(t){e.docListKey=t},expression:"docListKey"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.docListSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.DocListloadData}},[e._v("重置")])],1)],1),e._v(" "),a("xy-doc-list-table",{ref:"unitTable",attrs:{docListKey:e.docListKey,modifyVisible:e.modifyVisible},on:{delDocList:e.delDocList,modifyVisibleChange:function(t){e.modifyVisibleFun(t)}}})],1)],1)],1)])},staticRenderFns:[]};var c=a("C7Lr")(r,s,!1,function(e){a("owGy")},"data-v-691a149c",null);t.default=c.exports},Syte:function(e,t){},owGy:function(e,t){}});