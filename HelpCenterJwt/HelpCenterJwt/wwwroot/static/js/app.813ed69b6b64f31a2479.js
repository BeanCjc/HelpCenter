webpackJsonp([21],{"6hgx":function(t,e,n){"use strict";var o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};e.a=o},"74eS":function(t,e){},LicG:function(t,e){},M93x:function(t,e,n){"use strict";var o=n("sEFh"),r=n.n(o),a=n("6hgx");var i=function(t){n("q99/")},c=n("C7Lr")(r.a,a.a,!1,i,null,null);e.default=c.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("IvJb"),r=n("M93x"),a=n("KGCO"),i=n("9rMa");o.default.use(i.a);var c={SET_MSGTAG:function(t,e){console.log("获取",t.tagIndex),store.commit("SET_MSGTAG",e)},getUrl:function(t,e){var n=e.vm;switch(console.log(n.$store.state.contextUser.role),n.$store.state.contextUser.role){case"BLOC":"rent/blocTree";break;case"BRAND":"rent/brandTree";break;case"AREA":"rent/areaTree";break;case"ADMIN":case"AGENT":"rent/brandTree";break;default:void 0}}},u=n("aA9S"),l=n.n(u),s={SET_MSGTAG:function(t,e){t.tagIndex=e,console.log("保存",t.tagIndex)},set_token:function(t,e){t.token=e,localStorage.token=e},del_token:function(t){t.token="",localStorage.removeItem("token")},contextUser:function(t,e){t.contextUser=l()({},t.contextUser,e)},navMenu:function(t,e){t.navMenu=e},appInitCompleteFlag:function(t,e){t.appInitCompleteFlag=void 0===e&&null===e||e},appInitProgress:function(t){t.appInitProgress=t.appInitProgress+1,t.appInitProgress===t.appInitMaxProgress&&(t.appInitCompleteFlag=!0)},clearAppInitProgress:function(t){t.appInitProgress=0},dict:function(t,e){t.dict=e},dictItem:function(t,e,n){t.dict[e]=n},setStoreData:function(t,e){t.storeData=e}},p={SET_MSGTAG:function(t){return console.log("获取",t.tagIndex),t.tagIndex},currentBrand:function(t,e){switch(t.contextUser.role){case"BRAND":case"AREA":case"STORE":return t.contextUser.brand}return{}},currentRelation:function(t,e){switch(t.contextUser.role){case"BRAND":case"BLOC":case"AREA":return t.contextUser.relation}return{}}};o.default.use(i.a);var h={currentUser:null,isLogin:!1,token:"",contextUser:{id:void 0,username:void 0},tagIndex:""},f=new i.a.Store({state:h,actions:c,mutations:s,getters:p});o.default.use(a.a);var d=[{path:"/",redirect:"/docCenterSort"},{path:"/docCenter",component:function(t){return n.e(14).then(function(){var e=[n("pWA8")];t.apply(null,e)}.bind(this)).catch(n.oe)},children:[{path:"/docCenterSort",component:function(t){return n.e(16).then(function(){var e=[n("7SEX")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"文档分类"}},{path:"/docCenterDetail",component:function(t){return n.e(12).then(function(){var e=[n("jkKP")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"文档详情"}},{path:"/docCenterSeeMore",component:function(t){return n.e(11).then(function(){var e=[n("WMPn")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"查看更多"}},{path:"/docCenterSearchResults",component:function(t){return n.e(17).then(function(){var e=[n("rFNP")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"搜索结果"}}]},{path:"/Home",component:function(t){return n.e(7).then(function(){var e=[n("MpTN")];t.apply(null,e)}.bind(this)).catch(n.oe)},redirect:"/docCenterSort",meta:{title:"自述文件",requireAuth:!0},children:[{path:"/roleMange",component:function(t){return n.e(2).then(function(){var e=[n("GPdW")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"角色管理",requireAuth:!0}},{path:"/RoleAuthorization",component:function(t){return n.e(19).then(function(){var e=[n("wYWi")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"角色授权",requireAuth:!0}},{path:"/userMange",component:function(t){return n.e(6).then(function(){var e=[n("X8uN")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"用户管理",requireAuth:!0}},{path:"/departManage",component:function(t){return Promise.all([n.e(0),n.e(3)]).then(function(){var e=[n("Bz3Y")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"部门管理",requireAuth:!0}},{path:"/departStaff",component:function(t){return Promise.all([n.e(0),n.e(4)]).then(function(){var e=[n("mIKP")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"部门人员管理",requireAuth:!0}},{path:"/sortSetting",component:function(t){return Promise.all([n.e(0),n.e(5)]).then(function(){var e=[n("Lbz8")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"分类设置",requireAuth:!0}},{path:"/docList",component:function(t){return n.e(8).then(function(){var e=[n("RiIv")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"文档列表",requireAuth:!0}},{path:"/docListOperateAdd",component:function(t){return Promise.all([n.e(0),n.e(18)]).then(function(){var e=[n("Gl4p")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"新增",requireAuth:!0}},{path:"/docListOperateModify",component:function(t){return Promise.all([n.e(0),n.e(9)]).then(function(){var e=[n("9pAb")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"修改",requireAuth:!0}},{path:"/docListOperateView",component:function(t){return Promise.all([n.e(0),n.e(10)]).then(function(){var e=[n("zUSL")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"查看",requireAuth:!0}},{path:"/404",component:function(t){return n.e(15).then(function(){var e=[n("3bH0")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"404"}},{path:"/403",component:function(t){return n.e(13).then(function(){var e=[n("KfZE")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"403"}}]},{path:"/login",component:function(t){return Promise.all([n.e(0),n.e(1)]).then(function(){var e=[n("0HId")];t.apply(null,e)}.bind(this)).catch(n.oe)}},{path:"*",redirect:"/404"}];localStorage.getItem("token")&&f.commit("set_token",localStorage.getItem("token"));var m=new a.a({routes:d});m.beforeEach(function(t,e,n){t.matched.some(function(t){return t.meta.requireAuth})?f.state.token?n():n({path:"/login",query:{redirect:t.fullPath}}):n()});var v=m,g=n("DVuL"),A=n.n(g),S=(n("LicG"),n("74eS"),n("ympj"),n("briU"),n("rVsN")),I=n.n(S),b=n("6sKG"),y=n.n(b);y.a.interceptors.request.use(function(t){var e=localStorage.getItem("token");return e&&(t.headers.Authorization="bearer "+e),t},function(t){return I.a.reject(t)}),y.a.interceptors.response.use(function(t){return t},function(t){return t.response&&(console.log(t.response),401===t.response.status&&(localStorage.removeItem("token"),v.replace({path:"login",query:{redirect:v.currentRoute.path}}))),I.a.reject(t.response.data)});var P=y.a,T=n("IHPB"),x=n.n(T),E=function(t){t.prototype.$env={APP_INIT_COMPLETE:"onAppInitComplete",LOGIN_SUCCESS:"onLoginSuccess",LOGIN_OUT_SUCCESS:"onLoginOutSuccess",TOKEN_INVALID:"onTokenInvalid",COLLAPSE:"onCollapse",TAGS:"onTags",LOGIN_TOKEN:"signToken",LOGIN_USER:"loginUsername"},t.prototype.$bus=new t({method:{emit:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this.$emit.apply(this,[t].concat(x()(n)))},on:function(t,e){this.$on(t,e)},off:function(t,e){this.$off(t,e)}}})};o.default.use(E),o.default.use(A.a,{size:"small"}),o.default.prototype.$axios=P,new o.default({router:v,store:f,render:function(t){return t(r.default)}}).$mount("#app")},"q99/":function(t,e){},sEFh:function(t,e){},ympj:function(t,e){}},["NHnr"]);